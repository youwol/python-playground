export const defaultProject = {
    name: 'Project',
    environment: {
        requirements: {
            pythonPackages: ['numpy'],
            javascriptPackages: {
                modules: ['d3#^5.15.0'],
                aliases: {},
            },
        },
        configurations: [
            {
                name: 'default',
                scriptPath: './main.py',
                parameters: '',
            },
        ],
    },
    sources: [
        {
            path: './main.py',
            content:
                'from js import Object, document\n# import script has side-effects! => define flux_view.attr & flux_view.child from corresponding functions\nimport script\nfrom script import to_js\nfrom youwol_utils import createOutputView\nfrom flux_view import render, attr, child, childrenAppendOnly\nfrom rxjs import timer, BehaviorSubject, Subject, operators\nfrom datetime import datetime\nfrom plotly import newPlot\nimport plotly\nimport numpy as np\nfrom typing import Any\nfrom pyodide import create_proxy, to_js as to_js_0, create_once_callable\nfrom pyodide.http import pyfetch\nimport sklearn\nwindow=await script.install_all()\n\n#-----------------------\n# Reactivity at simplest\n#-----------------------\n\nvirtualDom = {\n   "innerText":attr(\n       timer(0,1000), \n       lambda count, _: f"Reactivity at simplest, it is : {datetime.today().strftime(\'%Y-%m-%d %H:%M:%S\')}") \n}\ncreateOutputView("Reactivity at simplest", to_js(virtualDom), __file__)\n\n#------------------------------\n# Definition of a \'logger\' view\n#------------------------------\n\nlogs_stream = Subject.new()\n\ncreateOutputView(\n    "Simple example with rxjs", \n    to_js(\n        {\n            "class":\'p-5 fv-bg-background-alt\',\n            "children":[\n                {\n                    "tag":\'h2\',\n                    "innerText": f"Outputs2 generated at {datetime.today().strftime(\'%Y-%m-%d %H:%M:%S\')}"\n                },\n                {\n                    "class":"p-2 rounded border fv-text-focus",\n                    "children": [virtualDom]\n                },\n                {\n                    "children": childrenAppendOnly(\n                        logs_stream.pipe( operators.map( create_proxy(lambda e, _: to_js([e])))),\n                        lambda e: e\n                    )\n                }\n            ]\n        }\n    ),\n    __file__\n)\n\nlogs_stream.next({"innerText":"coucou"})\n\n\n#-----------------------\n# Want a plot?\n#-----------------------\n\ndiv = document.createElement(\'div\')\ndata = {\n    \'x\': [1,2,3,4,5,6,7,8,9,10],\n    \'y\': np.random.random_sample((10,)),\n    \'mode\': \'lines+markers\',\n    \'type\': \'scatter\'\n}\nnewPlot(div, to_js([data]))\n\n\nlogs_stream.next({"children":[{"tag": "h2", "innerText": \'Want a plot?\'}, div]})\n#-----------------------\n# Want interactivity?\n#-----------------------\n\nsource_obs = BehaviorSubject.new(to_js(np.random.random_sample((5,))))\n        \ndef create_plot_view(y_data):\n    src = {**data,\'y\':y_data}\n    def new_plot(elem):\n        newPlot(\n            elem, \n            to_js([{**data,\'y\':y_data}]), \n            to_js({"title":{"text":f"Sum: {sum(y_data)}"}})\n        )\n                \n    return to_js({   \n        "class": "fv-bg-background-alt border",\n        "style":{"width": "500px", "height":"500px"},\n        "connectedCallback": new_plot\n    })\n\ni = 0\ndef on_click(ev):\n    global i\n    createOutputView(f"Creation differed {i}", to_js(virtualDom), __file__)\n    source_obs.next(to_js(np.random.random_sample((5,))))\n    i = i + 1\n    \non_click_pxy = create_proxy(on_click)\ncreate_plot_view_pxy = create_proxy(create_plot_view)\n\ndef on_disconnected(_e):\n    print(\'disconnected\')\n    [px.destroy() for px in [on_click_pxy, create_plot_view_pxy]]\n\nvirtualDom = { \n    "children":[\n        {\n            "class":\'border rounded fv-bg-background-alt fv-hover-xx-ligter fv-pointer fas fa-play p-1\',\n            "onclick": on_click_pxy\n        },\n        child(\n            source_obs,\n            create_plot_view_pxy\n        )                                                           \n    ],\n    "disconnectedCallback": on_disconnected\n}\n\n\nlogs_stream.next(virtualDom)\nlogs_stream.next({"innerText":"guigui"})\n#-----------------------\n# IO?\n#-----------------------\n\nresponse = await pyfetch(\n    url="/api/assets-gateway/files-backend/files/ccb4310e-60fc-402f-9114-fed616308cb7",\n)\ndata = await response.json()\n\ndiv = document.createElement(\'div\')\ndata = {\n    **data,\n    \'mode\': \'lines+markers\',\n    \'type\': \'scatter\'\n}\nnewPlot(div, to_js([data]))\n\nlogs_stream.next({"children":[{"tag": "h2", "innerText": \'from IO\'}, div]})\n\n',
        },
        {
            path: './plot.py',
            content:
                "from youwol_utils import call\nfrom js import Object\nimport asyncio\nfrom cdn_client import install\nimport flux_view\nfrom pyodide import create_proxy\nfrom pyodide import create_proxy, to_js as to_js_0\nfrom youwol_utils import display, createOutputView\n\njeeze=5\n\nflux_view.attr = lambda a,b: call(flux_view, 'attr$', a, create_proxy(b)) \n\nflux_view.child = lambda a,b: call(flux_view, 'child$', a, create_proxy(b)) \n  \nflux_view.childrenAppendOnly = lambda a,b: call(flux_view, 'childrenAppendOnly$', a, create_proxy(b)) \n  \ndef to_js(obj):\n    return to_js_0(obj, dict_converter= Object.fromEntries)\n\nasync def install_all():\n    createOutputView(\"Dummy3\", to_js({\"innerText\":\"toto\"}), __file__)\n    return await install(to_js({'modules':['@youwol/flux-view'],'aliases':{'flux_view':'@youwol/flux-view'}},))",
        },
        /*{
            path: './main.py',
            content:
                'from js import Object, document\n# import script has side-effects! => define flux_view.attr & flux_view.child from corresponding functions\nimport script\nfrom script import to_js\nfrom youwol_utils import createOutputView\nfrom flux_view import render, attr, child, childrenAppendOnly\nfrom rxjs import timer, BehaviorSubject, Subject, operators\nfrom datetime import datetime\nfrom plotly import newPlot\nimport plotly\nimport numpy as np\nfrom typing import Any\nfrom pyodide import create_proxy, to_js as to_js_0, create_once_callable\nfrom pyodide.http import pyfetch\nimport sklearn\nwindow=await script.install_all()\n\n#-----------------------\n# Reactivity at simplest\n#-----------------------\n\nvirtualDom = {\n   "innerText":attr(\n       timer(0,1000), \n       lambda count, _: f"Reactivity at simplest, it is : {datetime.today().strftime(\'%Y-%m-%d %H:%M:%S\')}") \n}\ncreateOutputView("Reactivity at simplest", to_js(virtualDom), __file__)\n\n#------------------------------\n# Definition of a \'logger\' view\n#------------------------------\n\nlogs_stream = Subject.new()\n\ncreateOutputView(\n    "Simple example with rxjs", \n    to_js(\n        {\n            "class":\'p-5 fv-bg-background-alt\',\n            "children":[\n                {\n                    "tag":\'h2\',\n                    "innerText": f"Outputs2 generated at {datetime.today().strftime(\'%Y-%m-%d %H:%M:%S\')}"\n                },\n                {\n                    "class":"p-2 rounded border fv-text-focus",\n                    "children": [virtualDom]\n                },\n                {\n                    "children": childrenAppendOnly(\n                        logs_stream.pipe( operators.map( create_proxy(lambda e, _: to_js([e])))),\n                        lambda e: e\n                    )\n                }\n            ]\n        }\n    ),\n    __file__\n)\n\nlogs_stream.next({"innerText":"coucou"})\n\n\n#-----------------------\n# Want a plot?\n#-----------------------\n\ndiv = document.createElement(\'div\')\ndata = {\n    \'x\': [1,2,3,4,5,6,7,8,9,10],\n    \'y\': np.random.random_sample((10,)),\n    \'mode\': \'lines+markers\',\n    \'type\': \'scatter\'\n}\nnewPlot(div, to_js([data]))\n\n\nlogs_stream.next({"children":[{"tag": "h2", "innerText": \'Want a plot?\'}, div]})\n#-----------------------\n# Want interactivity?\n#-----------------------\n\nsource_obs = BehaviorSubject.new(to_js(np.random.random_sample((5,))))\n        \ndef create_plot_view(y_data):\n    src = {**data,\'y\':y_data}\n    def new_plot(elem):\n        newPlot(\n            elem, \n            to_js([{**data,\'y\':y_data}]), \n            to_js({"title":{"text":f"Sum: {sum(y_data)}"}})\n        )\n                \n    return to_js({   \n        "class": "fv-bg-background-alt border",\n        "style":{"width": "500px", "height":"500px"},\n        "connectedCallback": new_plot\n    })\n\ni = 0\ndef on_click(ev):\n    global i\n    createOutputView(f"Creation differed {i}", to_js(virtualDom), __file__)\n    source_obs.next(to_js(np.random.random_sample((5,))))\n    i = i + 1\n    \non_click_pxy = create_proxy(on_click)\ncreate_plot_view_pxy = create_proxy(create_plot_view)\n\ndef on_disconnected(_e):\n    print(\'disconnected\')\n    [px.destroy() for px in [on_click_pxy, create_plot_view_pxy]]\n\nvirtualDom = { \n    "children":[\n        {\n            "class":\'border rounded fv-bg-background-alt fv-hover-xx-ligter fv-pointer fas fa-play p-1\',\n            "onclick": on_click_pxy\n        },\n        child(\n            source_obs,\n            create_plot_view_pxy\n        )                                                           \n    ],\n    "disconnectedCallback": on_disconnected\n}\n\n\nlogs_stream.next(virtualDom)\nlogs_stream.next({"innerText":"guigui"})\n#-----------------------\n# IO?\n#-----------------------\n\nresponse = await pyfetch(\n    url="/api/assets-gateway/files-backend/files/ccb4310e-60fc-402f-9114-fed616308cb7",\n)\ndata = await response.json()\n\ndiv = document.createElement(\'div\')\ndata = {\n    **data,\n    \'mode\': \'lines+markers\',\n    \'type\': \'scatter\'\n}\nnewPlot(div, to_js([data]))\n\nlogs_stream.next({"children":[{"tag": "h2", "innerText": \'from IO\'}, div]})\n\n',
        },
        {
            path: './plot.py',
            content:
                "from youwol_utils import call\nfrom js import Object\nimport asyncio\nfrom cdn_client import install\nimport flux_view\nfrom pyodide import create_proxy\nfrom pyodide import create_proxy, to_js as to_js_0\nfrom youwol_utils import display, createOutputView\n\njeeze=5\n\nflux_view.attr = lambda a,b: call(flux_view, 'attr$', a, create_proxy(b)) \n\nflux_view.child = lambda a,b: call(flux_view, 'child$', a, create_proxy(b)) \n  \nflux_view.childrenAppendOnly = lambda a,b: call(flux_view, 'childrenAppendOnly$', a, create_proxy(b)) \n  \ndef to_js(obj):\n    return to_js_0(obj, dict_converter= Object.fromEntries)\n\nasync def install_all():\n    createOutputView(\"Dummy3\", to_js({\"innerText\":\"toto\"}), __file__)\n    return await install(to_js({'modules':['@youwol/flux-view'],'aliases':{'flux_view':'@youwol/flux-view'}},))",
        },*/
    ],
}
